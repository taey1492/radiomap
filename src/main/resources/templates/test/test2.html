<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Contour Plot</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>

  <div id="myDiv" style="width: 600px; height: 600px;"></div>

</body>


<script th:inline="none">
  //위도와 경도를 input할 부분 임시 값 넣어져 있습니다.
  const coordinates = [[19, 27], [21, 18], [12, 23], [28, 17], [26, 14], [17, 21], [23, 28], [22, 26], [25, 12]];
  const zValues = [23, 78, 65, 97, 42, 13, 56, 89, 31, 100];

  // coordinates에서 고유한 x,y좌표 추출 , x와 y 배열 추출 및 오름차순 정렬 
  // coord => coord[1]: 각 좌표 쌍에서 y 좌표만 추출합니다.
  const Xarray = Array.from(new Set(coordinates.map(coord => coord[0]))).sort((a, b) => a - b);
  const Yarray = Array.from(new Set(coordinates.map(coord => coord[1]))).sort((a, b) => a - b);

  // z 배열을 초기화하고, y배열의 크기만큼 길이산정, x배열 길이만큼 null로 채우기,(y두번써도됨)
  const Zarray = Array.from({ length: Yarray.length }, () => Array(Xarray.length).fill(null));

  // z 배열에 값을 할당
  for (let index = 0; index < coordinates.length; index++) {
    const [xCoord, yCoord] = coordinates[index];
    const zValue = zValues[index];
    const i = Yarray.indexOf(yCoord);
    const j = Xarray.indexOf(xCoord);
    Zarray[i][j] = zValue;
  }


  var trace1 = {
    z: Zarray,
    x: Xarray,
    y: Yarray,


    connectgaps: true,
    zsmooth: 'best',
    type: 'heatmap',
    showscale: false,

  };

  var data = [trace1];

  var layout = {
    title: 'Simple Contour Plot'
  };

  Plotly.newPlot('myDiv', data, layout);
</script>


</html>